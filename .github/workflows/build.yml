name: development build & deploy
on: push
jobs:
  build_backend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 1.8
        uses: actions/setup-java@v1
        with:
          java-version: 1.8
      - name: Grant execute permission for gradlew
        run: chmod +x gradlew
      - name: Build with Gradle
        run: ./gradlew build
<<<<<<< HEAD
=======
      # [heroku] insert because heroku deploy requires
#       - name: heroku please
#         run: git add -A && git commit -m "Updated code" 
      - name: heroku deploy
        uses: akhileshns/heroku-deploy@v3.12.12 # This is the action
        with:
          heroku_api_key: ${{secrets.HEROKU_API_KEY}}
          heroku_app_name: "limitless-inlet-48288" #Must be unique in Heroku
          heroku_email: ${{secrets.HEROKU_EMAIL}}
          usedocker: true
>>>>>>> 087cf67a71cbd9733f432dc13ca0a15289015bec
#  frontend build(comment out it if necessary)
#  build_frontend:
#    runs-on: ubuntu-latest
#    steps:
#      - uses: actions/checkout@v2
#      - uses: actions/setup-node@v2
#        with:
#          node-version: "14"
#      - run: npm install
#        working-directory: ./src/main/frontend
#      - run: npm run lint
#        working-directory: ./src/main/frontend
